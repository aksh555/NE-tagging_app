<html>

<head>
  <title>NE Tagging</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    .head {
      text-align: center;
    }

    .card {
      font-size: 20;
      min-width: 130px;
      max-width: min-content;
      margin-bottom: 4em;
    }

    .card-block {
      word-wrap: break-word;
    }

    .card-text {
      text-align: center;
    }

    body {
      padding: 2em;
    }

    .w {
      background-color: blueviolet
    }

    .x {
      background-color: orangered
    }

    .y {
      background-color: Yellow
    }

    .z {
      background-color: SeaGreen
    }

    .zz {
      background-color: gainsboro;
    }
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
    integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"
    integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" />
  <div class="head">
    <h1>NE TAG ASSIGNMENT</h1>
  </div>
</head>

<body>
  <script>
    $(document).ready(function () {
      var words = {{ words| safe
    }};
    console.log(words);
    for (var i = 0; i < words.length; i++) {
      $(`div.dropdown${words[i].idx} select`).val(words[i].tag);

      var selectedItem = $(`#theSelect${words[i].idx} :selected`);
      $(`#theSelect${words[i].idx}`).css('backgroundColor', selectedItem.css('backgroundColor'));

      $(`#theSelect${words[i].idx}`).change(function () {
        var selectedItem = $(this).find("option:selected");
        $(this).css('backgroundColor', selectedItem.css('backgroundColor'));
      });
    }});
  </script>
  <h4>ID #{{ id }}</h4> <br>
  <form action="/update" method="POST">
    <input type="hidden" name="id" value="{{ id }}">
    <div class="card-deck">
      {% for j in words %}
      <div class="card">
        <div class="card-block">
          <p class="card-text">{{ j["word"] }}
          <div class="dropdown{{ j['idx'] }}">
            <select id="theSelect{{ j['idx'] }}" class="btn dropdown-toggle" name="choice{{ j['idx'] }}">
              <option class='x' value="0">B-PER</option>
              <option class='x' value="1">I-PER</option>
              <option class='y' value="2">B-LOC</option>
              <option class='y' value="3">I-LOC</option>
              <option class='z' value="4">B-ORG</option>
              <option class='z' value="5">I-ORG</option>
              <option class='w' value="6">B-MISC</option>
              <option class='w' value="7">I-MISC</option>
              <option class='zz' value="8">O</option>
            </select>
          </div>
          </p>
        </div>
      </div>
      {% endfor %}
    </div>
    <div class="head">
      <select id="score" class="btn btn-dark dropdown-toggle" name="score">
        <option value="1">Score: 1</option>
        <option value="-1">Score: -1</option>
      </select>
      &nbsp;&nbsp;&nbsp;&nbsp;
      <input class="btn btn-success" style="cursor:pointer" id="submit" type="submit" name="submit" value="Done">
    </div>
  </form>
</body>

</html>